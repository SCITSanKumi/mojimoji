<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mojimoji</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css" th:href="@{css/bootstrap.min.css}">
  <script defer src="../static/js/bootstrap.bundle.min.js" th:src="@{js/bootstrap.bundle.min.js}"></script>
  <!-- JQuery -->
  <script th:src="@{js/jquery-3.7.1.min.js}"></script>

  <!-- Bootstrap Icons (아이콘 사용 시 필요) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <script src="https://unpkg.com/sakura-js@latest/dist/sakura.min.js"></script>

  <style>
    /* Hero 섹션 */
    .hero-section {
      min-height: 90vh;
      position: relative;
      display: flex;
      align-items: center;
      padding: 3rem;
    }

    .hero-section .hero-text {
      z-index: 2;
    }

    .hero-section img.hero-bg {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      opacity: 0.9;
    }

    /* 서비스 섹션 */
    .service-section .service-icon {
      font-size: 2.5rem;
      color: #EE697D;
    }

    .service-section .service-box {
      transition: transform 0.2s ease;
      border-radius: 0.5rem;
    }

    /* "더보기" 링크 스타일 */
    .more-link {
      display: inline-flex;
      align-items: center;
      color: #333;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    .more-link:hover {
      color: #555;
    }

    /* Q&A 목록 스타일 */
    .faq-question-btn {
      width: 100%;
      text-align: left;
      background: none;
      border: none;
      font-size: 1rem;
      font-weight: 500;
      padding: 1rem 0;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #333;
      transition: background-color 0.2s ease;
    }

    .faq-question-btn:focus {
      outline: none;
    }

    .faq-question-btn:hover {
      background-color: #fafafa;
    }

    .faq-answer {
      padding: 0.75rem 1rem 1rem;
      background-color: #fff;
      border-left: 3px solid #EE697D;
      margin-bottom: 1rem;
      line-height: 1.5;
      color: #555;
    }

    .cherry_blossom {
      overflow: hidden;
      position: relative;
      background-size: cover;
      perspective: 1000px;
    }

    .cherry_blossom .petal {
      position: absolute;
      background: linear-gradient(-45deg, #ffb6c1 0%, #ffc5d0 40%, #ffdfe6 80%);
      border-radius: 10% 50% 40% 50%;
      z-index: 1;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
      pointer-events: none;
      transform-style: preserve-3d;
      transition: transform 1000ms linear;
    }

    @keyframes fall {
      0% {
        top: 0;
        opacity: 1;
      }

      80% {
        opacity: 1;
      }

      100% {
        top: 100%;
        opacity: 0.2;
      }
    }
  </style>
</head>

<body>
  <!-- 네비게이션 바 -->
  <header class="fixed-top" th:insert="~{fragments/header :: header}"></header>
  <div class="cherry_blossom">

    <!-- 메인 Hero 섹션 -->
    <div class="container-fluid hero-section vh-100">
      <div class="hero-text">
        <h1 class="display-4 fw-bolder">한번도 경험하지 못한<br>한자 학습!</h1>
        <a class="btn text-white fw-bolder fs-4 px-4 py-3 mt-3" style="background-color: #EE697D;"
          th:href="@{/game/play}">
          스토리 시작
        </a>
      </div>
      <!-- Hero 배경 이미지 -->
      <img th:src="@{/image/mountains.png}" src="../static/image/mountains.png" alt="배경 이미지" class="hero-bg">
    </div>
  </div>
  <!-- 서비스 섹션 (아이콘 4개) -->
  <section class="service-section py-5">
    <div class="container text-center">
      <div class="row g-4">
        <div class="col-md-3">
          <div class="p-4 service-box">
            <i class="bi bi-gem service-icon"></i>
            <h4 class="mt-3">모으는 재미, 배우는 즐거움</h4>
            <p class="text-muted">수집한 카드가 곧 내 실력이 됩니다.<br>한자를 하나씩 수집하며 달성감을 느껴보세요.</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="p-4 service-box">
            <i class="bi bi-clock-history service-icon"></i>
            <h4 class="mt-3">꾸준한 시간 투자, 한자 마스터</h4>
            <p class="text-muted">지속적인 노력이 쌓여 한자 실력이 눈에 띄게 향상됩니다.<br>시간을 투자해 학습의 즐거움을 만끽하세요!</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="p-4 service-box">
            <i class="bi bi-globe service-icon"></i>
            <h4 class="mt-3">스토리를 함께 만들어가는 즐거움</h4>
            <p class="text-muted">직접 쓰고 공유하는 이야기로, 모두가 참여하고 성장하는<br>학습 커뮤니티를 경험하세요.</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="p-4 service-box">
            <i class="bi bi-heart-fill service-icon"></i>
            <h4 class="mt-3">내 마음을 담은 한자 도감</h4>
            <p class="text-muted">한자 하나하나에 정성을 담아, 나만의 도감을 완성하고<br>그 속에 담긴 열정을 느껴보세요!</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- FAQ 섹션 시작 -->
  <section class="faq-section">
    <div class="container">
      <div class="row">
        <!-- 왼쪽 안내 영역 -->
        <div class="col-md-4 faq-left">
          <div class="faq-title">자주 묻는 질문</div>
          <div class="faq-subtitle">
            스토리 작성과 한자 카드 수집, 그리고 기타 기능에 대한<br>
            궁금한 점들을 모아봤습니다.
          </div>
        </div>
        <!-- 오른쪽 FAQ 목록 -->
        <div class="col-md-8">
          <!-- FAQ 1 -->
          <div class="mb-2">
            <button class="faq-question-btn" type="button" data-bs-toggle="collapse" data-bs-target="#faq1"
              aria-expanded="false" aria-controls="faq1">
              <span>Q. 스토리를 어떻게 시작하나요?</span>
              <i class="bi bi-chevron-down"></i>
            </button>
            <div class="collapse" id="faq1">
              <div class="faq-answer">
                A. 상단 메뉴의 <strong>“스토리 시작”</strong> 버튼을 클릭하시면, 원하는 주제를 선택하고 자유롭게 이야기를 작성할 수 있습니다.
                작성 후 공유 설정을 통해 다른 학습자들과 스토리를 함께 나눌 수 있어요.
              </div>
            </div>
          </div>
          <!-- FAQ 2 -->
          <div class="mb-2">
            <button class="faq-question-btn" type="button" data-bs-toggle="collapse" data-bs-target="#faq2"
              aria-expanded="false" aria-controls="faq2">
              <span>Q. 한자 카드는 어떻게 수집하나요?</span>
              <i class="bi bi-chevron-down"></i>
            </button>
            <div class="collapse" id="faq2">
              <div class="faq-answer">
                A. 스토리를 진행하며 등장하는 한자를 확인하면 자동으로 카드가 등록됩니다.
                <br>“카드 컬렉션” 페이지에서 수집 현황을 확인하고, 획득 조건을 충족하면 특별 카드도 얻을 수 있습니다.
              </div>
            </div>
          </div>
          <!-- FAQ 3 -->
          <div class="mb-2">
            <button class="faq-question-btn" type="button" data-bs-toggle="collapse" data-bs-target="#faq3"
              aria-expanded="false" aria-controls="faq3">
              <span>Q. 학습 기록이나 랭킹은 어디서 확인하나요?</span>
              <i class="bi bi-chevron-down"></i>
            </button>
            <div class="collapse" id="faq3">
              <div class="faq-answer">
                A. <strong>“랭크”</strong> 메뉴에서 전체 사용자 기준의 순위를 확인할 수 있으며, 학습 기록은 <strong>“마이 페이지”</strong> 내
                “진행 현황” 탭에서 열람 가능합니다.
              </div>
            </div>
          </div>
          <!-- FAQ 4 -->
          <div class="mb-2">
            <button class="faq-question-btn" type="button" data-bs-toggle="collapse" data-bs-target="#faq4"
              aria-expanded="false" aria-controls="faq4">
              <span>Q. 다른 언어도 지원할 계획이 있나요?</span>
              <i class="bi bi-chevron-down"></i>
            </button>
            <div class="collapse" id="faq4">
              <div class="faq-answer">
                A. 현재는 일본어 한자 학습에 집중하고 있지만, 추후 업데이트를 통해 다른 언어에 대한 지원도 검토하고 있습니다.
                많은 의견 부탁드립니다!
              </div>
            </div>
          </div>
          <!-- 필요하다면 FAQ 항목 추가 -->
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ 섹션 끝 -->

  <!-- Footer -->
  <footer th:insert="~{fragments/footer :: footer}"></footer>
  <script>
    // 수정된 기본 값 설정
    const defaults = {
      speed: 12,       // 낙하 속도 (숫자 클수록 빨라짐)
      maxSize: 25,     // 꽃잎 최대 크기
      minSize: 10,     // 꽃잎 최소 크기
      newOn: 200       // 꽃잎 생성 주기 (ms), 작을수록 더 자주 생성
    };

    // 벚꽃 영역 크기를 저장할 변수
    var $wrap = $('.cherry_blossom');
    let wrapH = $wrap.height();
    let wrapW = $wrap.width();

    // 벚꽃 잎 생성
    const $petal = $('<span class="petal"></span>');

    // 랜덤 회전 값을 생성하는 함수
    const getRandomRotate = () => {
      const rotateX = 360;
      const rotateY = Math.random() * 60 - 30;
      const rotateZ = Math.random() * 120 - 30;
      const translateX = Math.random() * 10 - 5;
      const translateY = Math.random() * 10 - 10;
      const translateZ = Math.random() * 15;
      return `rotateX(${rotateX}deg) rotateY(${rotateY}deg) rotateZ(${rotateZ}deg) 
          translateX(${translateX}px) translateY(${translateY}px) translateZ(${translateZ}px)`;
    };

    // 무작위 흔들림 애니메이션 배열 생성
    const randomSwayAnims = [...Array(10)].map(getRandomRotate);

    // 특정 요소에 흔들림 애니메이션 적용
    const applySwayAnim = (element) => {
      const randomSway = randomSwayAnims[Math.floor(Math.random() * randomSwayAnims.length)];
      element.css('transform', randomSway);
      setTimeout(() => {
        applySwayAnim(element);
      }, 1000);
    };

    // 벚꽃 잎 생성 함수
    const petalGen = () => {
      // 일정 간격마다 재귀 호출
      setTimeout(requestAnimationFrame, defaults.newOn, petalGen);

      const petal = $petal.clone();
      const size = Math.floor(Math.random() * (defaults.maxSize - defaults.minSize + 1)) + defaults.minSize;
      const startPosLeft = Math.random() * wrapW;
      const fallTime = (wrapH * 0.1 + Math.random() * 5) / defaults.speed;
      // 가로 흔들림 범위를 ±2로 확장
      const horizontalOffset = Math.random() * 4 - 2;

      // 애니메이션 끝나면 제거
      petal.on('animationend', () => {
        petal.remove();
      }).css({
        width: size,
        height: size,
        left: startPosLeft,
        position: 'absolute',
        // 기존 linear 대신 ease-in-out로 변경
        animation: `fall ${fallTime}s ease-in-out`
      }).appendTo($wrap);

      // 위치 업데이트 함수
      const updatePos = () => {
        petal.css('left', `+=${horizontalOffset}`);
        requestAnimationFrame(updatePos);
      };

      updatePos();
      applySwayAnim(petal);
    };

    // 창 크기가 변경될 때 영역 크기 업데이트
    $(window).resize(() => {
      wrapH = $wrap.height();
      wrapW = $wrap.width();
    });

    // 로딩 완료 후 벚꽃 잎 생성 시작
    $(window).on('load', () => {
      requestAnimationFrame(petalGen);
    });


  </script>
</body>

</html>