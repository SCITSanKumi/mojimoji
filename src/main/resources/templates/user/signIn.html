<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="../../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
    <script defer src="../../static/js/bootstrap.bundle.min.js" th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <!-- JQuery -->
    <script src="../../static/js/jquery-3.7.1.min.js" th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script>
        $(function () {
            let isUsernameValid = false;
            let isPasswordValid = false;

            // 아이디 유효성 검사
            $("#username").on("input", function () {
                let username = $("#username").val().trim();
                let usernameRegex = /^[a-zA-Z0-9]+$/;

                if (!usernameRegex.test(username)) {
                    $("#usernameFeedback").text("아이디는 영문자나 숫자만 포함할 수 있습니다.");
                    isUsernameValid = false;
                } else if (username.length < 5) {
                    $("#usernameFeedback").text("아이디는 최소 5자 이상이어야 합니다.");
                    isUsernameValid = false;
                } else {
                    $("#usernameFeedback").text("");
                    isUsernameValid = true;
                }
            });

            // 비밀번호 유효성 검사
            $("#password").on("input", function () {
                let password = $("#password").val();

                if (password.length < 6) {
                    $("#passwordFeedback").text("비밀번호는 최소 6자 이상이어야 합니다.");
                    isPasswordValid = false;
                } else {
                    $("#passwordFeedback").text("");
                    isPasswordValid = true;
                }
            });

            // 로그인 폼 제출
            $("form").submit(function (event) {
                if (!isUsernameValid || !isPasswordValid) {
                    alert("입력 정보를 다시 확인해주세요.");
                    return false; // 폼 제출 방지
                }
            });
        });
    </script>
</head>
<body>
    <header class="fixed-top" th:insert="~{fragments/header :: header}"></header>
    <div class="d-flex align-items-center justify-content-center vh-100 bg-light">
        <form method="post" th:action="@{/user/sign-in}" class="p-4 shadow-lg rounded text-center bg-white border border-light-subtle" style="max-width: 400px; width: 100%;">
            <h1 class="h2 fw-bolder mb-4">로그인</h1>
            <div class="form-floating mb-2">
                <input type="text" class="form-control" id="username" name="username" placeholder="hong">
                <label for="username">아이디</label>
            </div>
            <small id="usernameFeedback" class="text-danger d-block mb-2"></small>
            <div class="form-floating mb-4">
                <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                <label for="password">비밀번호</label>
            </div>
            <small id="passwordFeedback" class="text-danger d-block mb-4"></small>
            <button class="btn w-100 py-2 text-white mb-3" type="submit" style="background-color: #EE697D;">로그인</button>
            <p class="mb-3">
                <a href="#" class="text-decoration-none text-secondary">아이디 찾기</a> |
                <a href="#" class="text-decoration-none text-secondary">비밀번호 재설정</a> |
                <a th:href="@{/user/sign-up}" class="text-decoration-none text-secondary">회원가입</a>
            </p>
            <div class="d-flex align-items-center my-3">
                <hr class="flex-grow-1">
                <span class="px-2 text-muted">또는</span>
                <hr class="flex-grow-1">
            </div>
            <div class="d-flex justify-content-center gap-2 mt-3">
                <a href="#" class="btn btn-light rounded-circle p-2 shadow">
                    <img src="https://img.icons8.com/color/48/google-logo.png" width="28"/>
                </a>
                <a href="#" class="btn btn-primary rounded-circle p-2 shadow">
                    <img src="https://img.icons8.com/ios-filled/48/ffffff/facebook.png" width="28"/>
                </a>
                <a href="#" class="btn btn-dark rounded-circle p-2 shadow">
                    <img src="https://img.icons8.com/ios-filled/48/ffffff/github.png" width="28"/>
                </a>
                <a href="#" class="btn btn-secondary rounded-circle p-2 shadow">
                    <img src="https://img.icons8.com/ios-filled/48/ffffff/mac-os.png" width="28"/>
                </a>
            </div>
        </form>
    </div>
</body>
</html>