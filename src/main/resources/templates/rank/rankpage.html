<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mojimoji</title>
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
    <script defer src="../static/js/bootstrap.bundle.min.js" th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" th:href="@{/css/rank.css}" href="../../static/css/rank.css">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <!-- JQuery -->
    <script src="../../static/js/jquery-3.7.1.min.js" th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/rank.js}"></script>
</head>

<body>
    <header class="fixed-top" th:insert="~{fragments/header :: header}"></header>
    <div class="banner-container">
        <div id="particles-js"></div>
        <div class="hero-banner">
            <div class="container">
                <h1 class="animate__animated animate__fadeInDown">Explore the Leaderboards</h1>
                <p class="animate__animated animate__fadeInUp">Aim for the Top and Showcase Your Japanese Skills!</p>
            </div>
        </div>
    </div>

    <div class="container main-content">

        <main>
            <ul class="nav nav-pills ranking-tabs mb-4" id="rankingTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="overall-tab" data-bs-toggle="tab"
                        data-bs-target="#overall-tab-pane" type="button" role="tab" aria-controls="overall-tab-pane"
                        aria-selected="true">
                        <i class="fas fa-trophy"></i> 전체 순위
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="kanji-tab" data-bs-toggle="tab" data-bs-target="#kanji-tab-pane"
                        type="button" role="tab" aria-controls="kanji-tab-pane" aria-selected="false">
                        <i class="fas fa-book"></i> 한자 수집
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="story-tab" data-bs-toggle="tab" data-bs-target="#story-tab-pane"
                        type="button" role="tab" aria-controls="story-tab-pane" aria-selected="false">
                        <i class="fas fa-book-open"></i> 스토리 작성
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="likes-tab" data-bs-toggle="tab" data-bs-target="#likes-tab-pane"
                        type="button" role="tab" aria-controls="likes-tab-pane" aria-selected="false">
                        <i class="fas fa-thumbs-up"></i> Likes
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="rankingTabsContent">
                <!-- Overall Score Tab -->
                <div class="tab-pane fade show active animate__animated animate__fadeIn" id="overall-tab-pane"
                    role="tabpanel" aria-labelledby="overall-tab" tabindex="0">
                    <div class="overall-top-players"></div>

                    <div class="leaderboard-title">
                        <h3 class="text-center mb-4 animate__animated animate__zoomIn"><i class="fas fa-thumbs-up"></i>
                            전체 순위</h3>
                    </div>

                    <div class="leaderboard animate__animated animate__fadeIn">
                        <div class="card">
                            <div class="card-body">
                                <div>
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="rank-header">순위</th>
                                                <th class="player-header">유저</th>
                                                <th class="kanji-header">한자</th>
                                                <th class="kanji-header">스토리</th>
                                                <th class="kanji-header">Likes</th>
                                                <th class="score-header">점수</th>
                                            </tr>
                                        </thead>
                                        <tbody class="players-list">
                                            <!-- Players will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Kanji Collection Tab -->
                <div class="tab-pane fade animate__animated animate__fadeIn" id="kanji-tab-pane" role="tabpanel"
                    aria-labelledby="kanji-tab" tabindex="0">
                    <div class="kanji-top-players"></div>
                    <div class="leaderboard-title">
                        <h3 class="text-center mb-4 animate__animated animate__zoomIn"><i class="fas fa-book"></i> Kanji
                            한자 수집</h3>
                    </div>
                    <div class="leaderboard animate__animated animate__fadeIn">
                        <div class="card">
                            <div class="card-body">
                                <div>
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="rank-header">순위</th>
                                                <th class="player-header">유저</th>
                                                <th class="kanji-header">수집한 한자</th>
                                                <th class="score-header">수집률 %</th>
                                                <th class="score-header">점수</th>
                                            </tr>
                                        </thead>
                                        <tbody class="kanji-list">
                                            <!-- To be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Story Completion Tab -->
                <div class="tab-pane fade animate__animated animate__fadeIn" id="story-tab-pane" role="tabpanel"
                    aria-labelledby="story-tab" tabindex="0">
                    <div class="story-top-players"></div>
                    <div class="leaderboard-title">
                        <h3 class="text-center mb-4 animate__animated animate__zoomIn"><i class="fas fa-book-open"></i>
                            스토리</h3>
                    </div>
                    <div class="leaderboard animate__animated animate__fadeIn">
                        <div class="card">
                            <div class="card-body">
                                <div>
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="rank-header">순위</th>
                                                <th class="player-header">유저</th>
                                                <th class="story-header">스토리</th>
                                                <th class="score-header">전체 라인</th>
                                                <th class="score-header">점수</th>
                                            </tr>
                                        </thead>
                                        <tbody class="story-list">
                                            <!-- To be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade animate__animated animate__fadeIn" id="likes-tab-pane" role="tabpanel"
                    aria-labelledby="likes-tab" tabindex="0">
                    <div class="likes-top-players"></div>
                    <div class="leaderboard-title">
                        <h3 class="text-center mb-4 animate__animated animate__zoomIn"><i class="fas fa-thumbs-up"></i>
                            Most Liked
                            Players</h3>
                    </div>
                    <div class="leaderboard animate__animated animate__fadeIn">
                        <div class="card">
                            <div class="card-body">
                                <div>
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="rank-header">순위</th>
                                                <th class="player-header">유저</th>
                                                <th class="likes-header">공유된 스토리</th>
                                                <th class="likes-header">좋아요</th>
                                                <th class="likes-header">조회수</th>
                                                <th class="likes-header">댓글</th>
                                                <th class="score-header">점수</th>
                                            </tr>
                                        </thead>
                                        <tbody class="likes-list">
                                            <!-- To be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- User Profile Modal -->
        <div class="modal fade" id="userProfileModal" tabindex="-1" aria-labelledby="userProfileModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="userProfileModalLabel">유저 정보</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="text-center mb-4">
                            <div class="modal-avatar">
                                <img src="" alt="User Avatar" id="modalUserAvatar">
                            </div>
                            <h3 id="modalUserName" class="mt-3"></h3>
                            <div class="user-badges mt-2">
                                <span class="badge bg-primary"><i class="fas fa-trophy"></i> Top Performer</span>
                                <span class="badge bg-success"><i class="fas fa-fire"></i> <span
                                        id="modalUserStreak">0</span>
                                    Day Streak</span>
                                <span class="badge bg-warning"><i class="fas fa-star"></i> <span
                                        id="modalUserRating">0</span>
                                    Rating</span>
                            </div>
                        </div>

                        <div class="user-stats mb-4">
                            <div class="row">
                                <div class="col-4 text-center">
                                    <div class="stat-circle">
                                        <span id="modalUserKanji">0</span>
                                    </div>
                                    <p>한자</p>
                                </div>
                                <div class="col-4 text-center">
                                    <div class="stat-circle">
                                        <span id="modalUserQuiz">0%</span>
                                    </div>
                                    <p>스토리</p>
                                </div>
                                <div class="col-4 text-center">
                                    <div class="stat-circle">
                                        <span id="modalUserScore">0</span>
                                    </div>
                                    <p>종합</p>
                                </div>
                            </div>
                        </div>

                        <h6 class="section-heading"><i class="fas fa-award"></i> Recent Achievements</h6>
                        <div class="achievements mb-4">
                            <div class="achievement animate__animated animate__fadeIn">
                                <div class="achievement-icon">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="achievement-info">
                                    <h6>Kanji Master</h6>
                                    <p>Collected over 100 kanji</p>
                                    <small>3 days ago</small>
                                </div>
                            </div>
                            <div class="achievement animate__animated animate__fadeIn" style="animation-delay: 0.2s">
                                <div class="achievement-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="achievement-info">
                                    <h6>Quiz Wizard</h6>
                                    <p>Achieved 90%+ accuracy on 5 consecutive quizzes</p>
                                    <small>1 week ago</small>
                                </div>
                            </div>
                            <div class="achievement animate__animated animate__fadeIn" style="animation-delay: 0.4s">
                                <div class="achievement-icon">
                                    <i class="fas fa-gem"></i>
                                </div>
                                <div class="achievement-info">
                                    <h6>Rare Find</h6>
                                    <p>Discovered a Level 5 rare kanji</p>
                                    <small>2 weeks ago</small>
                                </div>
                            </div>
                        </div>

                        <h6 class="section-heading"><i class="fas fa-chart-line"></i> Progress</h6>
                        <div class="progress-section">
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span>Story Completion</span>
                                    <span><span id="modalUserStories">0</span>/50</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar bg-success" id="modalStoryProgress" role="progressbar"
                                        style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span>Kanji Collection</span>
                                    <span><span id="modalUserKanjiCounts">0</span>/2136</span>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar bg-primary" id="modalKanjiProgress" role="progressbar"
                                        style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">View Full Profile</button>
                    </div>
                </div>
            </div>
        </div>
        <footer th:insert="~{fragments/footer :: footer}"></footer>
        <script>
            // Initialize Bootstrap tooltips
            document.addEventListener('DOMContentLoaded', function () {
                const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                tooltipTriggerList.map(function (tooltipTriggerEl) {
                    return new bootstrap.Tooltip(tooltipTriggerEl);
                });
            });
        </script>
</body>

</html>