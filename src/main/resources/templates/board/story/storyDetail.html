<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- jQuery -->
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../../static/css/bootstrap.min.css"
        th:href="@{/css/bootstrap.min.css}">
    <!-- Bootstrap JS -->
    <script defer src="../../static/js/bootstrap.bundle.min.js" th:src="@{/js/bootstrap.bundle.min.js}"></script>

    <script defer th:src="@{/js/reply.js}"></script>
    <style>
        /* 본문 스타일 */
        .story-box {
            background-color: #dee2e6;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        /* 댓글 컨테이너 스타일 */
        .comment-container {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            background-color: #fefefe;
        }

        /* 댓글 목록 스타일 */
        .comment-list {
            max-height: 300px;
            overflow-y: auto;
        }

        /* 댓글 항목에 Flexbox 레이아웃 적용하여 삭제 버튼은 오른쪽에 고정 */
        .list-group-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 댓글 텍스트 영역은 왼쪽 정렬 */
        .comment-text {
            flex: 1;
            text-align: left;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <header class="fixed-top" th:insert="~{fragments/header :: header}"></header>

    <!-- 공유 스토리 ID, 로그인 사용자 ID -->
    <input type="hidden" id="sharedBookId" th:value="${sharedStoryInfo.sharedBookId}">
    <input type="hidden" id="currentUserId" th:value="${#authentication.principal.userId}">

    <div class="container mt-5 pt-5">
        <button style="float: right;" id="toStoryList">목록으로</button>
        <h1 th:text="${sharedStoryInfo.title}">책제목</h1>

        <!-- 공유 스토리 내용 -->
        <div th:each="sharedStory : ${sharedStoryContent}">
            <p th:text="${sharedStory.content}"></p>
            <hr>
        </div>

        <!-- 댓글 영역 -->
        <div class="col-md-8">
            <h5>댓글</h5>
            <input type="text" id="comment-input" class="form-control" placeholder="댓글 추가...">
            <button class="btn btn-dark mt-2" id="add-comment">댓글 등록</button>

            <div class="comment-container mt-3">
                <!-- 댓글 목록 -->
                <ul class="list-group comment-list" id="comment-list">
                    <!-- AJAX로 불러온 댓글이 추가됨 -->
                </ul>
                <!-- 더보기 버튼 -->
                <div class="text-center mt-2">
                    <button class="btn btn-light" id="load-more-button" style="display: none;">더보기</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>